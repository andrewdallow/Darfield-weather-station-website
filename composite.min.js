!function(){"use strict";angular.module("wxApp",["ngRoute","highcharts-ng","ui.bootstrap","ui.bootstrap.tpls","angularUtils.directives.dirPagination","ngSanitize","angulartics","angulartics.google.tagmanager"]),angular.module("wxApp").config(["$routeProvider","$locationProvider",function(a,b){b.html5Mode(!0).hashPrefix("!"),a.when("/",{templateUrl:"components/home/home.html",controller:"homeController"}).when("/webcam/latest",{templateUrl:"components/webcam/webcam.html",controller:"webcamController"}).when("/webcam",{templateUrl:"components/webcam/webcam.html",controller:"webcamController"}).when("/gauges",{templateUrl:"components/gauges/gauges.php",controller:"gaugesController"}).when("/graphs",{templateUrl:"components/graphs/graphs.html",controller:"graphsController"}).when("/forecast",{templateUrl:"components/forecast/forecast.html",controller:"forecastController"}).when("/records",{templateUrl:"components/history/records/records.html",controller:"recordsController"}).when("/noaa-style-reports",{templateUrl:"components/history/noaa-reports/noaa-style-reports.html",controller:"noaaController"}).when("/about",{templateUrl:"components/about/about.html",controller:"aboutController"}).when("/historicGraphs",{templateUrl:"components/history/graphs/historicGraphs.html",controller:"historicGraphsController"}).otherwise({redirectTo:"/"})}])}(),angular.module("wxApp").controller("mainCtrl",["$scope","page",function(a,b){a.page=b}]),function(){"use strict";angular.module("wxApp").controller("aboutController",["$scope",function(a){a.page.setTitle("About"),a.page.setDescription("Information on the Darfield Weather Station and website")}])}(),function(){angular.module("wxApp").controller("aboutController",["$scope",function(a){a.page.setTitle("About"),a.page.setDescription("Information on the Darfield Weather Station and website")}])}(),function(){"use strict";angular.module("wxApp").controller("forecastController",["$scope","$http",function(a,b){function c(){b.get(k,{cache:!0}).success(function(b){var c=b.forecast.txt_forecast.forecastday,d=b.forecast.simpleforecast.forecastday,e=0;angular.forEach(d,function(b){b.period<=l&&(c[e].temp=b.high.celsius,c[e+1].temp=b.low.celsius,a.forecastData.push({forecastday:b,txt_forecast:[c[e],c[e+1]]})),e+=2}),a.loading=!1})}a.loading=!0,a.page.setTitle("Forecast"),a.page.setDescription("7-day weather forecast for Darfield, New Zealand.");var d="14667b9989cff64d",e="data/forecast/images/",f=".gif",g="_metric",h="zmw:00000.10.93781.json",i="http://api.wunderground.com/api/",j="forecast10day",k=i+d+"/"+j+"/q/"+h,l=7;a.uomTemp="&degC",a.forecastData=[],a.iconlist={chanceflurries:["sn","Chance flurries"],chancerain:["hi_shwrs","Chance rain"],chancesleet:["ip","Chance sleet"],chancesnow:["sn","Chance snow"],chancetstorms:["hi_tsra","Chance thunderstorms"],clear:["skc","Clear"],cloudy:["ovc","Cloudy"],flurries:["sn","Flurries"],fog:["fg","Fog"],hazy:["fg","Hazy"],mostlycloudy:["bkn","Mostly cloudy"],mostlysunny:["sct","Partly cloudy"],partlycloudy:["sct","Partly cloudy"],partlysunny:["bkn","Mostly sunny"],rain:["ra","Rain"],sleet:["ip","Sleet"],sleat:["ip","Sleet"],snow:["sn","Snow"],sunny:["skc","Sunny"],tstorms:["tsra","Thunderstorms"],unknown:["na",""],nt_chanceflurries:["nsn","Chance flurries"],nt_chancerain:["hi_nshwrs","Chance rain"],nt_chancesleet:["ip","Chance sleet"],nt_chancesnow:["nsn","Chance snow"],nt_chancetstorms:["hi_ntsra","Chance thunderstorms"],nt_clear:["nskc","Clear"],nt_cloudy:["novc","Cloudy"],nt_flurries:["nsn","Flurries"],nt_fog:["nfg","Fog"],nt_hazy:["nfg","Hazy"],nt_mostlycloudy:["nbkn","Mostly cloudy"],nt_mostlysunny:["nsct","Partly cloudy"],nt_partlycloudy:["nsct","Partly cloudy"],nt_partlysunny:["nbkn","Mostly cloudy"],nt_rain:["nra","Rain"],nt_sleet:["ip","Sleet"],nt_sleat:["ip","Sleet"],nt_snow:["nsn","Snow"],nt_sunny:["nskc","Sunny"],nt_tstorms:["ntsra","Thunderstorms"],nt_unknown:["na",""],"":["na",""]},a.getIcon=function(b){var c;return c="0"!==b.pop&&"clear"!==b.icon?a.iconlist[b.icon][0]+b.pop:a.iconlist[b.icon][0],e+c+f},a.getIconText=function(b){return a.iconlist[b.icon][1]},a.getForecastDescp=function(a){return a["fcttext"+g]},c()}])}(),function(){angular.module("wxApp").controller("forecastController",["$scope","$http",function(a,b){function c(){b.get(k,{cache:!0}).success(function(b){var c=b.forecast.txt_forecast.forecastday,d=b.forecast.simpleforecast.forecastday,e=0;angular.forEach(d,function(b){b.period<=l&&(c[e].temp=b.high.celsius,c[e+1].temp=b.low.celsius,a.forecastData.push({forecastday:b,txt_forecast:[c[e],c[e+1]]})),e+=2}),a.loading=!1})}a.loading=!0,a.page.setTitle("Forecast"),a.page.setDescription("7-day weather forecast for Darfield, New Zealand.");var d="14667b9989cff64d",e="data/forecast/images/",f=".gif",g="_metric",h="zmw:00000.10.93781.json",i="http://api.wunderground.com/api/",j="forecast10day",k=i+d+"/"+j+"/q/"+h,l=7;a.uomTemp="&degC",a.forecastData=[],a.iconlist={chanceflurries:["sn","Chance flurries"],chancerain:["hi_shwrs","Chance rain"],chancesleet:["ip","Chance sleet"],chancesnow:["sn","Chance snow"],chancetstorms:["hi_tsra","Chance thunderstorms"],clear:["skc","Clear"],cloudy:["ovc","Cloudy"],flurries:["sn","Flurries"],fog:["fg","Fog"],hazy:["fg","Hazy"],mostlycloudy:["bkn","Mostly cloudy"],mostlysunny:["sct","Partly cloudy"],partlycloudy:["sct","Partly cloudy"],partlysunny:["bkn","Mostly sunny"],rain:["ra","Rain"],sleet:["ip","Sleet"],sleat:["ip","Sleet"],snow:["sn","Snow"],sunny:["skc","Sunny"],tstorms:["tsra","Thunderstorms"],unknown:["na",""],nt_chanceflurries:["nsn","Chance flurries"],nt_chancerain:["hi_nshwrs","Chance rain"],nt_chancesleet:["ip","Chance sleet"],nt_chancesnow:["nsn","Chance snow"],nt_chancetstorms:["hi_ntsra","Chance thunderstorms"],nt_clear:["nskc","Clear"],nt_cloudy:["novc","Cloudy"],nt_flurries:["nsn","Flurries"],nt_fog:["nfg","Fog"],nt_hazy:["nfg","Hazy"],nt_mostlycloudy:["nbkn","Mostly cloudy"],nt_mostlysunny:["nsct","Partly cloudy"],nt_partlycloudy:["nsct","Partly cloudy"],nt_partlysunny:["nbkn","Mostly cloudy"],nt_rain:["nra","Rain"],nt_sleet:["ip","Sleet"],nt_sleat:["ip","Sleet"],nt_snow:["nsn","Snow"],nt_sunny:["nskc","Sunny"],nt_tstorms:["ntsra","Thunderstorms"],nt_unknown:["na",""],"":["na",""]},a.getIcon=function(b){var c;return c="0"!==b.pop&&"clear"!==b.icon?a.iconlist[b.icon][0]+b.pop:a.iconlist[b.icon][0],e+c+f},a.getIconText=function(b){return a.iconlist[b.icon][1]},a.getForecastDescp=function(a){return a["fcttext"+g]},c()}])}(),function(){"use strict";angular.module("wxApp").controller("graphsController",["$scope","$http","graphsFactory",function(a,b,c){function d(){b.get("components/graphs/realTimeLogSQL.php").success(function(b){a.charts=c.loadGraphs(b),a.loading=!1})}function e(a,b){var c=[];return Highcharts.each(a.series,function(a){var d=a.searchPoint(b,!0);"Navigator"!==a.name&&d&&(c.push(d),d.onMouseOver())}),c}function f(){d()}a.loading=!0,a.page.setTitle("Graphs"),a.page.setDescription("12-hr, 24-hr, and 48-hr graphs of weather data at Darfield, New Zealand"),a.charts=[],a.selected=0,a.buttons=[{time:12},{time:24},{time:48}],a.graphCombo=function(a){var b,c,d;for(d=0;d<Highcharts.charts.length;d+=1)b=Highcharts.charts[d].getHighcharts(),a=b.pointer.normalize(a),c=e(b,a),c.length>0&&(b.tooltip.refresh(c),b.xAxis[0].drawCrosshair(a,c[0]))},a.setExtreme=function(b,c){var d=36e5;a.selected=c,angular.forEach(a.charts,function(a){a.chart.xAxis.currentMin=a.chart.xAxis.currentMax-b*d})},f()}])}(),function(){angular.module("wxApp").controller("graphsController",["$scope","$http","graphsFactory",function(a,b,c){function d(){b.get("components/graphs/realTimeLogSQL.php").success(function(b){a.charts=c.loadGraphs(b),a.loading=!1})}function e(a,b){var c=[];return Highcharts.each(a.series,function(a){var d=a.searchPoint(b,!0);"Navigator"!==a.name&&d&&(c.push(d),d.onMouseOver())}),c}function f(){d()}a.loading=!0,a.page.setTitle("Graphs"),a.page.setDescription("12-hr, 24-hr, and 48-hr graphs of weather data at Darfield, New Zealand"),a.charts=[],a.selected=0,a.buttons=[{time:12},{time:24},{time:48}],a.graphCombo=function(a){var b,c,d;for(d=0;d<Highcharts.charts.length;d+=1)b=Highcharts.charts[d].getHighcharts(),a=b.pointer.normalize(a),c=e(b,a),c.length>0&&(b.tooltip.refresh(c),b.xAxis[0].drawCrosshair(a,c[0]))},a.setExtreme=function(b,c){var d=36e5;a.selected=c,angular.forEach(a.charts,function(a){a.chart.xAxis.currentMin=a.chart.xAxis.currentMax-b*d})},f()}])}(),function(){"use strict";angular.module("wxApp").factory("graphsFactory",function(){var a={loadGraphs:function(a){Highcharts.charts=[];var b,c=[],d=a.xData,e=a.datasets;return angular.forEach(e,function(a){var e;angular.forEach(a,function(a){a.data=Highcharts.map(a.data,function(a,b){return[d[b],a]})}),e={options:{chart:{marginLeft:40,spacingTop:20,spacingBottom:20},title:{text:"",align:"left",margin:0,x:30},credits:{enabled:!1},legend:{enabled:!0,align:"left",verticalAlign:"top"},plotOptions:{series:{fillOpacity:.9},line:{marker:{enabled:!1,lineWidth:1}},areaspline:{marker:{enabled:!1}},area:{marker:{enabled:!1}},scatter:{marker:{states:{hover:{enabled:!0}}}}},xAxis:{crosshair:!0,type:"datetime"},yAxis:[{title:{text:null}},{title:{text:null}}],exporting:{enabled:!1},tooltip:{crosshairs:!0,backgroundColor:"#EFEFFB",borderWidth:!1,shared:!0,shadow:!1,useHTML:!0,formatter:function(){var a,b=[],c=this.points,d=c.length,e='<span class="graphToolTip"><span style="color:',f='">●</span> ';for(a=0;d>a;a+=1)b.push(e+c[a].series.color+f+c[a].series.name+": "+c[a].y+c[a].series.userOptions.unit+"<span>");return b.join(", ")},positioner:function(){return{x:this.chart.chartWidth-this.label.width,y:-1}}}},loading:!1,series:[],size:{},xAxis:{currentMin:d[d.length-1]-432e5,currentMax:d[d.length-1]},func:function(){Highcharts.Pointer.prototype.reset=function(){}}},e.series=a,e.size=a[0].size,"undefined"!=typeof a[0].ymin&&(e.options.yAxis[0].min=a[0].ymin),"undefined"!=typeof a[0].ymax&&(e.options.yAxis[0].max=a[0].ymax),"undefined"!=typeof a[0].tickPositions&&(e.options.yAxis[0].tickPositions=a[0].tickPositions),"Wind Direction"===a[0].name&&(e.options.yAxis[0].labels={formatter:function(){var a=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"];return a[Math.round(this.value/22.5)]}}),b=a[0].name.substr(0,1).toLowerCase()+a[0].name.substr(1),b=b.replace(/\s/g,""),c=c.concat([{id:b,chart:e}]),Highcharts.charts.push(e)}),c}};return a})}(),function(){angular.module("wxApp").factory("graphsFactory",function(){var a={loadGraphs:function(a){Highcharts.charts=[];var b,c=[],d=a.xData,e=a.datasets;return angular.forEach(e,function(a){var e;angular.forEach(a,function(a){a.data=Highcharts.map(a.data,function(a,b){return[d[b],a]})}),e={options:{chart:{marginLeft:40,spacingTop:20,spacingBottom:20},title:{text:"",align:"left",margin:0,x:30},credits:{enabled:!1},legend:{enabled:!0,align:"left",verticalAlign:"top"},plotOptions:{series:{fillOpacity:.9},line:{marker:{enabled:!1,lineWidth:1}},areaspline:{marker:{enabled:!1}},area:{marker:{enabled:!1}},scatter:{marker:{states:{hover:{enabled:!0}}}}},xAxis:{crosshair:!0,type:"datetime"},yAxis:[{title:{text:null}},{title:{text:null}}],exporting:{enabled:!1},tooltip:{crosshairs:!0,backgroundColor:"#EFEFFB",borderWidth:!1,shared:!0,shadow:!1,useHTML:!0,formatter:function(){var a,b=[],c=this.points,d=c.length,e='<span class="graphToolTip"><span style="color:',f='">●</span> ';for(a=0;d>a;a+=1)b.push(e+c[a].series.color+f+c[a].series.name+": "+c[a].y+c[a].series.userOptions.unit+"<span>");return b.join(", ")},positioner:function(){return{x:this.chart.chartWidth-this.label.width,y:-1}}}},loading:!1,series:[],size:{},xAxis:{currentMin:d[d.length-1]-432e5,currentMax:d[d.length-1]},func:function(){Highcharts.Pointer.prototype.reset=function(){}}},e.series=a,e.size=a[0].size,"undefined"!=typeof a[0].ymin&&(e.options.yAxis[0].min=a[0].ymin),"undefined"!=typeof a[0].ymax&&(e.options.yAxis[0].max=a[0].ymax),"undefined"!=typeof a[0].tickPositions&&(e.options.yAxis[0].tickPositions=a[0].tickPositions),"Wind Direction"===a[0].name&&(e.options.yAxis[0].labels={formatter:function(){var a=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"];return a[Math.round(this.value/22.5)]}}),b=a[0].name.substr(0,1).toLowerCase()+a[0].name.substr(1),b=b.replace(/\s/g,""),c=c.concat([{id:b,chart:e}]),Highcharts.charts.push(e)}),c}};return a})}(),function(){"use strict";angular.module("wxApp").controller("historicGraphsController",["$scope","$http","historicGraphsFactory",function(a,b,c){a.page.setTitle("Historic Graphs"),a.page.setDescription("Historic weather data graphs for the Darfield Weather Station, including: Temperature, Rainfall, Pressure, Wind, Humidity"),a.dataTypes=[{name:"Daily",options:[{name:"1 month",time:1},{name:"6 month",time:6},{name:"1 year",time:12},{name:"2 years",time:24}]},{name:"HiLo",options:[]},{name:"Monthly",options:[{name:"1 year",time:12},{name:"2 years",time:24},{name:"3 years",time:36},{name:"4 years",time:48}]},{name:"Yearly",options:[]}],a.tabs=[{title:"Temperature",src:{daily:"temperature/historicTemperature.php",hilo:"temperature/historicTemperatureHiLo.php",yearly:"temperature/historicTemperatureYearly.php"},content:"Temperature"},{title:"Humidity",src:{daily:"humidity/historicHumidity.php",yearly:"humidity/historicHumidityYearly.php"},content:"Humidity"},{title:"Pressure",src:{daily:"pressure/historicPressure.php"},content:"Pressure"},{title:"Wind",src:{daily:"wind/historicWind.php",yearly:"wind/historicWindYearly.php"},content:"Wind"},{title:"Rainfall",src:{daily:"rainfall/historicRainDaily.php",monthly:"rainfall/historicRainMonthly.php",yearly:"rainfall/historicRainYearly.php"},content:"Rainfall"}],a.isDropdown=function(a){var b=!0;return 0===a.length&&(b=!1),b},a.isDisabled=function(a,b){var c;return c=!a[b.toLowerCase()]},a.getGraph=function(d,e,f){f=f||0;var g=d[e.toLowerCase()];0!==f&&(g=g+"?months="+f),b.get("components/history/graphs/"+g).then(function(b){a.charts=c.loadGraphs(b.data)})},a.getFirstGraph=function(b){a.getGraph(b.src,"daily",1)},a.getGraph(a.tabs[0].src,"daily",1)}])}(),function(){angular.module("wxApp").controller("historicGraphsController",["$scope","$http","historicGraphsFactory",function(a,b,c){a.page.setTitle("Historic Graphs"),a.page.setDescription("Historic weather data graphs for the Darfield Weather Station, including: Temperature, Rainfall, Pressure, Wind, Humidity"),a.dataTypes=[{name:"Daily",options:[{name:"1 month",time:1},{name:"6 month",time:6},{name:"1 year",time:12},{name:"2 years",time:24}]},{name:"HiLo",options:[]},{name:"Monthly",options:[{name:"1 year",time:12},{name:"2 years",time:24},{name:"3 years",time:36},{name:"4 years",time:48}]},{name:"Yearly",options:[]}],a.tabs=[{title:"Temperature",src:{daily:"temperature/historicTemperature.php",hilo:"temperature/historicTemperatureHiLo.php",yearly:"temperature/historicTemperatureYearly.php"},content:"Temperature"},{title:"Humidity",src:{daily:"humidity/historicHumidity.php",yearly:"humidity/historicHumidityYearly.php"},content:"Humidity"},{title:"Pressure",src:{daily:"pressure/historicPressure.php"},content:"Pressure"},{title:"Wind",src:{daily:"wind/historicWind.php",yearly:"wind/historicWindYearly.php"},content:"Wind"},{title:"Rainfall",src:{daily:"rainfall/historicRainDaily.php",monthly:"rainfall/historicRainMonthly.php",yearly:"rainfall/historicRainYearly.php"},content:"Rainfall"}],a.isDropdown=function(a){var b=!0;return 0===a.length&&(b=!1),b},a.isDisabled=function(a,b){var c;return c=!a[b.toLowerCase()]},a.getGraph=function(d,e,f){f=f||0;var g=d[e.toLowerCase()];0!==f&&(g=g+"?months="+f),b.get("components/history/graphs/"+g).then(function(b){a.charts=c.loadGraphs(b.data)})},a.getFirstGraph=function(b){a.getGraph(b.src,"daily",1)},a.getGraph(a.tabs[0].src,"daily",1)}])}(),function(){"use strict";angular.module("wxApp").factory("historicGraphsFactory",["$timeout",function(a){var b={loadGraphs:function(b){Highcharts.charts=[];var c,d=b.datasets;return c={options:{chart:{marginLeft:40,spacingTop:30,spacingBottom:20},title:{text:"",align:"left",margin:0,x:30},credits:{enabled:!1},legend:{enabled:!0,align:"left",verticalAlign:"top"},plotOptions:{series:{fillOpacity:.9},line:{marker:{enabled:!1,lineWidth:1}},areaspline:{marker:{enabled:!1}},area:{marker:{enabled:!1}},scatter:{marker:{states:{hover:{enabled:!0}}}}},xAxis:{crosshair:!0,type:"datetime"},yAxis:[{lineWidth:1,title:{text:null}},{title:{text:null}}],exporting:{enabled:!1},tooltip:{crosshairs:!0,backgroundColor:"#EFEFFB",borderWidth:!1,shared:!0,shadow:!1,useHTML:!0,formatter:function(){var a,b,c=[],d=this.points,e=d.length,f='<span class="graphToolTip"><span style="color:';for(a=0;e>a;a+=1)b=f+d[a].series.color+'">●</span> '+d[a].series.name+": ",b="columnrange"===d[a].series.type||"arearange"===d[a].series.type?b+d[a].point.low+d[a].series.userOptions.unit+" - "+d[a].point.high+d[a].series.userOptions.unit+"<span>":b+d[a].y+d[a].series.userOptions.unit+"<span>",c.push(b);return c.join(", ")},positioner:function(){return{x:this.chart.chartWidth-this.label.width,y:-1}}}},loading:!1,series:[],size:{},resetChartSize:function(a){a.reflow()},func:function(b){a(function(){b.reflow()},0),Highcharts.Pointer.prototype.reset=function(){}}},c.series=d,"undefined"!=typeof b.categories&&(c.options.xAxis.categories=b.categories),"undefined"!=typeof b.yAxis&&("undefined"!=typeof b.yAxis.plotBands&&(c.options.yAxis[0].plotBands=b.yAxis.plotBands),"undefined"!=typeof b.yAxis.plotLines&&(c.options.yAxis[0].plotLines=b.yAxis.plotLines)),c}};return b}])}(),function(){angular.module("wxApp").factory("historicGraphsFactory",["$timeout",function(a){var b={loadGraphs:function(b){Highcharts.charts=[];var c,d=b.datasets;return c={options:{chart:{marginLeft:40,spacingTop:30,spacingBottom:20},title:{text:"",align:"left",margin:0,x:30},credits:{enabled:!1},legend:{enabled:!0,align:"left",verticalAlign:"top"},plotOptions:{series:{fillOpacity:.9},line:{marker:{enabled:!1,lineWidth:1}},areaspline:{marker:{enabled:!1}},area:{marker:{enabled:!1}},scatter:{marker:{states:{hover:{enabled:!0}}}}},xAxis:{crosshair:!0,type:"datetime"},yAxis:[{lineWidth:1,title:{text:null}},{title:{text:null}}],exporting:{enabled:!1},tooltip:{crosshairs:!0,backgroundColor:"#EFEFFB",borderWidth:!1,shared:!0,shadow:!1,useHTML:!0,formatter:function(){var a,b,c=[],d=this.points,e=d.length,f='<span class="graphToolTip"><span style="color:';for(a=0;e>a;a+=1)b=f+d[a].series.color+'">●</span> '+d[a].series.name+": ",b="columnrange"===d[a].series.type||"arearange"===d[a].series.type?b+d[a].point.low+d[a].series.userOptions.unit+" - "+d[a].point.high+d[a].series.userOptions.unit+"<span>":b+d[a].y+d[a].series.userOptions.unit+"<span>",c.push(b);return c.join(", ")},positioner:function(){return{x:this.chart.chartWidth-this.label.width,y:-1}}}},loading:!1,series:[],size:{},resetChartSize:function(a){a.reflow()},func:function(b){a(function(){b.reflow()},0),Highcharts.Pointer.prototype.reset=function(){}}},c.series=d,"undefined"!=typeof b.categories&&(c.options.xAxis.categories=b.categories),"undefined"!=typeof b.yAxis&&("undefined"!=typeof b.yAxis.plotBands&&(c.options.yAxis[0].plotBands=b.yAxis.plotBands),"undefined"!=typeof b.yAxis.plotLines&&(c.options.yAxis[0].plotLines=b.yAxis.plotLines)),c}};return b}])}(),function(){"use strict";angular.module("wxApp").controller("noaaController",["$scope","$http",function(a,b){function c(){b.get("components/history/noaa-reports/noaaFiles.php?"+(new Date).getTime()).success(function(b){a.filenames=b,a.getYearData(a.filenames[0]),a.selectedMonth=""})}function d(a){return e+a+f}a.page.setTitle("NOAA-style Climate Reports"),a.page.setDescription("NOAA-style Climate Summaries for Darfield, New Zealand");var e="data/reports/",f=".txt",g="NOAAMO",h={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"};a.noaaFile="",a.selectedMonth="",a.selectedYear="",a.months=[{"short":"Jan",num:"01",disabled:!1},{"short":"Feb",num:"02",disabled:!1},{"short":"Mar",num:"03",disabled:!1},{"short":"Apr",num:"04",disabled:!1},{"short":"May",num:"05",disabled:!1},{"short":"Jun",num:"06",disabled:!1},{"short":"Jul",num:"07",disabled:!1},{"short":"Aug",num:"08",disabled:!1},{"short":"Sep",num:"09",disabled:!1},{"short":"Oct",num:"10",disabled:!1},{"short":"Nov",num:"11",disabled:!1},{"short":"Dec",num:"12",disabled:!1}],a.getYearData=function(b){a.selectedYear=a.getYearName(b.year),a.noaaFile=d(b.year),a.selectedMonth="",angular.forEach(a.months,function(c){var d="NOAAMO"+c.num+a.selectedYear;-1!==b.months.indexOf(d)?c.disabled=!1:c.disabled=!0})},a.getMonthData=function(b){a.selectedMonth=g+b.num+a.selectedYear,a.noaaFile=d(a.selectedMonth)},a.getYearName=function(a){return a.substring(6)},a.getMonthName=function(a){return""!==a?h[a.substring(6,8)]:""},c()}])}(),function(){angular.module("wxApp").controller("noaaController",["$scope","$http",function(a,b){function c(){b.get("components/history/noaa-reports/noaaFiles.php?"+(new Date).getTime()).success(function(b){a.filenames=b,a.getYearData(a.filenames[0]),a.selectedMonth=""})}function d(a){return e+a+f}a.page.setTitle("NOAA-style Climate Reports"),a.page.setDescription("NOAA-style Climate Summaries for Darfield, New Zealand");var e="data/reports/",f=".txt",g="NOAAMO",h={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"};a.noaaFile="",a.selectedMonth="",a.selectedYear="",a.months=[{"short":"Jan",num:"01",disabled:!1},{"short":"Feb",num:"02",disabled:!1},{"short":"Mar",num:"03",disabled:!1},{"short":"Apr",num:"04",disabled:!1},{"short":"May",num:"05",disabled:!1},{"short":"Jun",num:"06",disabled:!1},{"short":"Jul",num:"07",disabled:!1},{"short":"Aug",num:"08",disabled:!1},{"short":"Sep",num:"09",disabled:!1},{"short":"Oct",num:"10",disabled:!1},{"short":"Nov",num:"11",disabled:!1},{"short":"Dec",num:"12",disabled:!1}],a.getYearData=function(b){a.selectedYear=a.getYearName(b.year),a.noaaFile=d(b.year),a.selectedMonth="",angular.forEach(a.months,function(c){var d="NOAAMO"+c.num+a.selectedYear;-1!==b.months.indexOf(d)?c.disabled=!1:c.disabled=!0})},a.getMonthData=function(b){a.selectedMonth=g+b.num+a.selectedYear,a.noaaFile=d(a.selectedMonth)},a.getYearName=function(a){return a.substring(6)},a.getMonthName=function(a){return""!==a?h[a.substring(6,8)]:""},c()}])}(),function(){"use strict";angular.module("wxApp").controller("recordsController",["$scope","$http",function(a,b){a.page.setTitle("Records"),a.page.setDescription("All-time weather records for Darfield Weather Station");var c=function(){b.get("data/records.json?"+(new Date).getTime()).success(function(b){a.records=b})};c()}])}(),function(){angular.module("wxApp").controller("recordsController",["$scope","$http",function(a,b){a.page.setTitle("Records"),a.page.setDescription("All-time weather records for Darfield Weather Station");var c=function(){b.get("data/records.json?"+(new Date).getTime()).success(function(b){a.records=b})};c()}])}(),angular.module("wxApp").factory("liveRainGraphFactory",function(){"use strict";var a={options:{chart:{backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:70,spacingLeft:0,spacingRight:0},xAxis:{categories:[1,2],labels:{enabled:!1},lineWidth:0,gridLineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},exporting:{enabled:!1},yAxis:{labels:{enabled:!1},title:{text:""},gridLineColor:"transparent"},title:{text:""},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{shadow:!1,borderWidth:0,useHTML:!0,formatter:function(){var a=new Date(this.x),b=a.getHours(),c="0"+a.getMinutes(),d="0"+a.getSeconds(),e=b+":"+c.substr(-2)+":"+d.substr(-2);return e+"</br>"+this.y+" mm/hr"}}},loading:!1,series:[{data:[],type:"line",color:"#0000FF"}]};return a}),angular.module("wxApp").factory("liveRainGraphFactory",function(){var a={options:{chart:{backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:70,spacingLeft:0,spacingRight:0},xAxis:{categories:[1,2],labels:{enabled:!1},lineWidth:0,gridLineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},exporting:{enabled:!1},yAxis:{labels:{enabled:!1},title:{text:""},gridLineColor:"transparent"},title:{text:""},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{shadow:!1,borderWidth:0,useHTML:!0,formatter:function(){var a=new Date(this.x),b=a.getHours(),c="0"+a.getMinutes(),d="0"+a.getSeconds(),e=b+":"+c.substr(-2)+":"+d.substr(-2);return e+"</br>"+this.y+" mm/hr"}}},loading:!1,series:[{data:[],type:"line",color:"#0000FF"}]};return a}),angular.module("wxApp").factory("liveTempGraphFactory",function(){"use strict";var a={options:{chart:{backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:70,spacingLeft:0,spacingRight:0},xAxis:{categories:[1,2],labels:{enabled:!1},lineWidth:0,gridLineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},exporting:{enabled:!1},yAxis:{labels:{enabled:!1},title:{text:""},gridLineColor:"transparent"},title:{text:""},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{shadow:!1,borderWidth:0,useHTML:!0,formatter:function(){var a=new Date(this.x),b=a.getHours(),c="0"+a.getMinutes(),d="0"+a.getSeconds(),e=b+":"+c.substr(-2)+":"+d.substr(-2);return e+"</br>"+this.y+"&degC"}}},loading:!1,series:[{data:[],type:"line",color:"#FF0000"}]};return a}),angular.module("wxApp").factory("liveTempGraphFactory",function(){var a={options:{chart:{backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:70,spacingLeft:0,spacingRight:0},xAxis:{categories:[1,2],labels:{enabled:!1},lineWidth:0,gridLineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},exporting:{enabled:!1},yAxis:{labels:{enabled:!1},title:{text:""},gridLineColor:"transparent"},title:{text:""},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{shadow:!1,borderWidth:0,useHTML:!0,formatter:function(){var a=new Date(this.x),b=a.getHours(),c="0"+a.getMinutes(),d="0"+a.getSeconds(),e=b+":"+c.substr(-2)+":"+d.substr(-2);return e+"</br>"+this.y+"&degC"}}},loading:!1,series:[{data:[],type:"line",color:"#FF0000"}]};return a}),angular.module("wxApp").factory("liveWindGraphFactory",function(){"use strict";var a={options:{chart:{backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:70,spacingLeft:0,spacingRight:0},xAxis:{categories:[1,2],labels:{enabled:!1},lineWidth:0,gridLineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},exporting:{enabled:!1},yAxis:{labels:{enabled:!1},title:{text:""},gridLineColor:"transparent"},title:{text:""},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{shadow:!1,borderWidth:0,useHTML:!0,formatter:function(){var a=new Date(this.x),b=a.getHours(),c="0"+a.getMinutes(),d="0"+a.getSeconds(),e=b+":"+c.substr(-2)+":"+d.substr(-2);return e+"</br>"+this.y+" km/h"}}},loading:!1,series:[{data:[],type:"line",color:"#00FF00"}]};return a}),angular.module("wxApp").factory("liveWindGraphFactory",function(){var a={options:{chart:{backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:70,spacingLeft:0,spacingRight:0},xAxis:{categories:[1,2],labels:{enabled:!1},lineWidth:0,gridLineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},exporting:{enabled:!1},yAxis:{labels:{enabled:!1},title:{text:""},gridLineColor:"transparent"},title:{text:""},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{shadow:!1,borderWidth:0,useHTML:!0,formatter:function(){var a=new Date(this.x),b=a.getHours(),c="0"+a.getMinutes(),d="0"+a.getSeconds(),e=b+":"+c.substr(-2)+":"+d.substr(-2);return e+"</br>"+this.y+" km/h"}}},loading:!1,series:[{data:[],type:"line",color:"#00FF00"}]};return a}),angular.module("wxApp").factory("thermoFactory",function(){"use strict";var a={options:{chart:{backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:150,marginBottom:50,marginTop:5,marginLeft:0,spacingRight:0},tooltip:{enabled:!1},exporting:{enabled:!1},series:[{data:[30.5],type:"column",pointWidth:28,threshold:-40,borderWidth:1,borderRadius:0,borderColor:"black",name:"background",grouping:!1,color:"#FFFFFF",animation:!1},{data:[12],type:"column",pointWidth:20,threshold:-40,borderWidth:0,name:"Temp"}],credits:{enabled:!1},legend:{enabled:!1},xAxis:{labels:{enabled:!1},lineWidth:0,tickWidth:0},yAxis:[{min:0,max:31.5,minPadding:0,maxPadding:0,startOnTick:!1,endOnTick:!1,title:{text:""},tickInterval:5,minorTickInterval:1,gridLineWidth:0,minorGridLineWidth:0,tickWidth:1,minorTickWidth:1,offset:-52},{min:0,max:31.5,minPadding:0,maxPadding:0,startOnTick:!1,endOnTick:!1,title:{text:""},tickPositions:[20],gridLineWidth:0,minorGridLineWidth:0,tickWidth:2,minorTickWidth:1,offset:-55,opposite:!0,tickColor:"#FF0000",labels:{style:{color:"#FF0000"},formatter:function(){return""}}},{min:0,max:31.5,minPadding:0,maxPadding:0,startOnTick:!1,endOnTick:!1,title:{text:""},tickPositions:[5],gridLineWidth:0,minorGridLineWidth:0,tickWidth:2,minorTickWidth:1,offset:-55,opposite:!0,tickColor:"#0000FF",labels:{style:{color:"#0000FF"},formatter:function(){return""}}}],plotOptions:{series:{color:"#FF0000"}},title:{text:""}},loading:!1,series:[{type:"column",pointWidth:21,threshold:-40,borderWidth:1,borderRadius:0,borderColor:"black",name:"background",grouping:!1,color:"#FFFFFF",animation:!1},{type:"column",pointWidth:15,threshold:-40,borderWidth:0,name:"Temp"}],yAxis:[{min:0,max:30},{min:0,max:30,tickPositions:[25]},{min:0,max:30,tickPositions:[0]}],func:function(a){var b=a.series[0],c=b.points[0],d=15;a.renderer.circle(a.plotLeft+c.shapeArgs.x+c.shapeArgs.width/2,a.plotTop+b.yAxis.len+d-2.5,17).attr({fill:"white","stroke-width":1,stroke:"black"}).add(),a.renderer.circle(a.plotLeft+c.shapeArgs.x+c.shapeArgs.width/2,a.plotTop+b.yAxis.len+d-2.5,15).attr({fill:{radialGradient:{cx:.5,cy:.5,r:.5},stops:[[0,"#FFFFFF"],[1,"#FF0000"]]}}).add()}};return a}),angular.module("wxApp").factory("thermoFactory",function(){var a={options:{chart:{backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:150,marginBottom:50,marginTop:5,marginLeft:0,spacingRight:0},tooltip:{enabled:!1},exporting:{enabled:!1},series:[{data:[30.5],type:"column",pointWidth:28,threshold:-40,borderWidth:1,borderRadius:0,borderColor:"black",name:"background",grouping:!1,color:"#FFFFFF",animation:!1},{data:[12],type:"column",pointWidth:20,threshold:-40,borderWidth:0,name:"Temp"}],credits:{enabled:!1},legend:{enabled:!1},xAxis:{labels:{enabled:!1},lineWidth:0,tickWidth:0},yAxis:[{min:0,max:31.5,minPadding:0,maxPadding:0,startOnTick:!1,endOnTick:!1,title:{text:""},tickInterval:5,minorTickInterval:1,gridLineWidth:0,minorGridLineWidth:0,tickWidth:1,minorTickWidth:1,offset:-52},{min:0,max:31.5,minPadding:0,maxPadding:0,startOnTick:!1,endOnTick:!1,title:{text:""},tickPositions:[20],gridLineWidth:0,minorGridLineWidth:0,tickWidth:2,minorTickWidth:1,offset:-55,opposite:!0,tickColor:"#FF0000",labels:{style:{color:"#FF0000"},formatter:function(){return""}}},{min:0,max:31.5,minPadding:0,maxPadding:0,startOnTick:!1,endOnTick:!1,title:{text:""},tickPositions:[5],gridLineWidth:0,minorGridLineWidth:0,tickWidth:2,minorTickWidth:1,offset:-55,opposite:!0,tickColor:"#0000FF",labels:{style:{color:"#0000FF"},formatter:function(){return""}}}],plotOptions:{series:{color:"#FF0000"}},title:{text:""}},loading:!1,series:[{type:"column",pointWidth:21,threshold:-40,borderWidth:1,borderRadius:0,borderColor:"black",name:"background",grouping:!1,color:"#FFFFFF",animation:!1},{type:"column",pointWidth:15,threshold:-40,borderWidth:0,name:"Temp"
}],yAxis:[{min:0,max:30},{min:0,max:30,tickPositions:[25]},{min:0,max:30,tickPositions:[0]}],func:function(a){var b=a.series[0],c=b.points[0],d=15;a.renderer.circle(a.plotLeft+c.shapeArgs.x+c.shapeArgs.width/2,a.plotTop+b.yAxis.len+d-2.5,17).attr({fill:"white","stroke-width":1,stroke:"black"}).add(),a.renderer.circle(a.plotLeft+c.shapeArgs.x+c.shapeArgs.width/2,a.plotTop+b.yAxis.len+d-2.5,15).attr({fill:{radialGradient:{cx:.5,cy:.5,r:.5},stops:[[0,"#FFFFFF"],[1,"#FF0000"]]}}).add()}};return a}),angular.module("wxApp").factory("windVaneFactory",["$timeout",function(a){"use strict";var b=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],c=function(a){return b[Math.floor((parseInt(a,10)+11.25)/22.5)]},d={options:{chart:{type:"gauge",backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:100},title:{text:"",style:{display:"none"}},subtitle:{text:"",style:{display:"none"}},credits:{enabled:!1},exporting:{enabled:!1},pane:{startAngle:0,endAngle:360,background:[{borderWidth:0,backgroundColor:"transparent"}]},yAxis:{min:0,max:360,offset:-6,tickPosition:"outside",tickInterval:22.5,tickWidth:0,minorGridLineWidth:0,minorTickLength:0,tickColor:"#A4A4A4",lineColor:"#A4A4A4",lineWidth:2,labels:{distance:14,step:4,formatter:function(){return c(this.value)},style:{fontSize:"12px",color:"grey"}}},plotOptions:{gauge:{dial:{radius:"100%",backgroundColor:"red",borderColor:"white",borderWidth:1,baseWidth:1,topWidth:15,baseLength:"55%",rearLength:"-55%"},pivot:{radius:0},dataLabels:{enabled:!1}}},tooltip:{enabled:!1}},series:[{data:[180],animation:{duration:2e3}}],loading:!1,func:function(b){a(function(){b.reflow()},0)}};return d}]),angular.module("wxApp").factory("windVaneFactory",["$timeout",function(a){var b=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],c=function(a){return b[Math.floor((parseInt(a,10)+11.25)/22.5)]},d={options:{chart:{type:"gauge",backgroundColor:"rgba(0,0,0,0)",plotBorderWidth:0,plotShadow:!1,height:100},title:{text:"",style:{display:"none"}},subtitle:{text:"",style:{display:"none"}},credits:{enabled:!1},exporting:{enabled:!1},pane:{startAngle:0,endAngle:360,background:[{borderWidth:0,backgroundColor:"transparent"}]},yAxis:{min:0,max:360,offset:-6,tickPosition:"outside",tickInterval:22.5,tickWidth:0,minorGridLineWidth:0,minorTickLength:0,tickColor:"#A4A4A4",lineColor:"#A4A4A4",lineWidth:2,labels:{distance:14,step:4,formatter:function(){return c(this.value)},style:{fontSize:"12px",color:"grey"}}},plotOptions:{gauge:{dial:{radius:"100%",backgroundColor:"red",borderColor:"white",borderWidth:1,baseWidth:1,topWidth:15,baseLength:"55%",rearLength:"-55%"},pivot:{radius:0},dataLabels:{enabled:!1}}},tooltip:{enabled:!1}},series:[{data:[180],animation:{duration:2e3}}],loading:!1,func:function(b){a(function(){b.reflow()},0)}};return d}]),angular.module("wxApp").factory("graphs24HrFactory",function(){"use strict";var a={options:{chart:{plotBorderWidth:0,plotShadow:!1},title:{useHTML:!0,text:'<span class="graphTitles">Temperature (&deg;C)</span>',align:"left",floating:!1},exporting:{enabled:!1},legend:{enabled:!1},tooltip:{enabled:!1},credits:{enabled:!1},xAxis:{type:"datetime",crosshair:!0,labels:{enabled:!1},tickInterval:72e5,gridLineWidth:.7,gridLineDashStyle:"longdash"},yAxis:{title:{text:""},gridLineWidth:0,labels:{enabled:!1}},plotOptions:{series:{dataLabels:{useHTML:!0,enabled:!0,align:"center",verticalAlign:"middle",style:{fontSize:"15px"},formatter:function(){var a="#000000";return this.y>=30?a="temp8":this.y>=25&&this.y<30?a="temp7":this.y>=20&&this.y<25?a="temp6":this.y>=15&&this.y<20?a="temp5":this.y>=10&&this.y<15?a="temp4":this.y>=5&&this.y<10?a="temp3":this.y>=0&&this.y<5?a="temp2":this.y<0&&(a="temp1"),'<span class="'+a+'">'+this.y+"</span>"}},marker:{enabled:!1},enableMouseTracking:!1,lineWidth:1,color:"#BDBDBD"}}},loading:!1,series:[{name:"Temperature",type:"line",pointInterval:36e5,data:[]}]},b={options:{chart:a.options.chart,title:{useHTML:!0,text:'<span class="graphTitles">Rainfall (mm) and Pressure (hPa)</span>',align:"left",floating:!1},exporting:a.options.exporting,legend:a.options.legend,tooltip:{backgroundColor:"#EFEFFB",borderWidth:!1,shadow:!1,useHTML:!0,padding:0,formatter:function(){var a,b=[],c=[" mm"," hPa"],d=this.points,e=d.length;for(a=0;e>a;a+=1)b.push('<span class="graphToolTip"><span style="color:'+d[a].series.color+'">●</span> '+d[a].series.name+": "+d[a].y+c[a]+"<span>");return b.join(", ")},shared:!0,positioner:function(){return{x:this.chart.chartWidth-this.label.width,y:-1}},hideDelay:6e5},credits:a.options.credits,xAxis:{type:a.options.xAxis.type,crosshair:!0,labels:{enabled:!0},tickInterval:a.options.xAxis.tickInterval,gridLineWidth:a.options.xAxis.gridLineWidth,gridLineDashStyle:a.options.xAxis.gridLineDashStyle},yAxis:[{title:{text:""},gridLineWidth:0,labels:{enabled:!1}},{title:{text:""},gridLineWidth:0,labels:{enabled:!1}}],plotOptions:{series:{marker:{enabled:!1}}}},loading:!1,series:[{name:"Rainfall",type:"areaspline",color:"#58ACFA",pointStart:a.series[0].pointStart,pointInterval:a.series[0].pointInterval,yAxis:0},{name:"Pressure",type:"line",color:"#585858",pointStart:a.series[0].pointStart,pointInterval:a.series[0].pointInterval,yAxis:1,marker:{enabled:!1}}]};return{temp24Hr:a,rainBaro24Hr:b}}),angular.module("wxApp").factory("graphs24HrFactory",function(){var a={options:{chart:{plotBorderWidth:0,plotShadow:!1},title:{useHTML:!0,text:'<span class="graphTitles">Temperature (&deg;C)</span>',align:"left",floating:!1},exporting:{enabled:!1},legend:{enabled:!1},tooltip:{enabled:!1},credits:{enabled:!1},xAxis:{type:"datetime",crosshair:!0,labels:{enabled:!1},tickInterval:72e5,gridLineWidth:.7,gridLineDashStyle:"longdash"},yAxis:{title:{text:""},gridLineWidth:0,labels:{enabled:!1}},plotOptions:{series:{dataLabels:{useHTML:!0,enabled:!0,align:"center",verticalAlign:"middle",style:{fontSize:"15px"},formatter:function(){var a="#000000";return this.y>=30?a="temp8":this.y>=25&&this.y<30?a="temp7":this.y>=20&&this.y<25?a="temp6":this.y>=15&&this.y<20?a="temp5":this.y>=10&&this.y<15?a="temp4":this.y>=5&&this.y<10?a="temp3":this.y>=0&&this.y<5?a="temp2":this.y<0&&(a="temp1"),'<span class="'+a+'">'+this.y+"</span>"}},marker:{enabled:!1},enableMouseTracking:!1,lineWidth:1,color:"#BDBDBD"}}},loading:!1,series:[{name:"Temperature",type:"line",pointInterval:36e5,data:[]}]},b={options:{chart:a.options.chart,title:{useHTML:!0,text:'<span class="graphTitles">Rainfall (mm) and Pressure (hPa)</span>',align:"left",floating:!1},exporting:a.options.exporting,legend:a.options.legend,tooltip:{backgroundColor:"#EFEFFB",borderWidth:!1,shadow:!1,useHTML:!0,padding:0,formatter:function(){var a,b=[],c=[" mm"," hPa"],d=this.points,e=d.length;for(a=0;e>a;a+=1)b.push('<span class="graphToolTip"><span style="color:'+d[a].series.color+'">●</span> '+d[a].series.name+": "+d[a].y+c[a]+"<span>");return b.join(", ")},shared:!0,positioner:function(){return{x:this.chart.chartWidth-this.label.width,y:-1}},hideDelay:6e5},credits:a.options.credits,xAxis:{type:a.options.xAxis.type,crosshair:!0,labels:{enabled:!0},tickInterval:a.options.xAxis.tickInterval,gridLineWidth:a.options.xAxis.gridLineWidth,gridLineDashStyle:a.options.xAxis.gridLineDashStyle},yAxis:[{title:{text:""},gridLineWidth:0,labels:{enabled:!1}},{title:{text:""},gridLineWidth:0,labels:{enabled:!1}}],plotOptions:{series:{marker:{enabled:!1}}}},loading:!1,series:[{name:"Rainfall",type:"areaspline",color:"#58ACFA",pointStart:a.series[0].pointStart,pointInterval:a.series[0].pointInterval,yAxis:0},{name:"Pressure",type:"line",color:"#585858",pointStart:a.series[0].pointStart,pointInterval:a.series[0].pointInterval,yAxis:1,marker:{enabled:!1}}]};return{temp24Hr:a,rainBaro24Hr:b}}),function(){"use strict";angular.module("wxApp").controller("homeController",["$scope","$http","$interval","$timeout","unitConversionService","windVaneFactory","thermoFactory","liveTempGraphFactory","liveWindGraphFactory","liveRainGraphFactory","graphs24HrFactory","realtimeService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return 10>a&&(a="0"+a),a}function n(){var b=Date.now()-a.current.time;b>O&&(a.stationOnline=!1)}function o(){var b=864e5,c=432e5;a.temp24Hr.series[0].pointStart=Date.parse(a.graphs24Hrs.timedate)-b+c,a.rainBaro24Hr.series[0].pointStart=Date.parse(a.graphs24Hrs.timedate)-b+c,a.rainBaro24Hr.series[1].pointStart=Date.parse(a.graphs24Hrs.timedate)-b+c,a.temp24Hr.series[0].data=a.graphs24Hrs.temp,a.rainBaro24Hr.series[0].data=a.graphs24Hrs.rain,a.rainBaro24Hr.series[1].data=a.graphs24Hrs.baro}function p(){a.current.tempTrend=l.getTrendIcon(a.current.tempchangehour.value),a.current.baroTrend=l.getTrendIcon(a.current.barometerTrendData.value)}function q(){var b=5,c=4.1;a.thermo.series[1].data=[parseFloat(a.current.outTemp.value)],a.thermo.series[0].data=[parseFloat(a.current.tempMaxValueT.value)+c],a.thermo.yAxis[0].max=parseFloat(a.current.tempMaxValueT.value)+b,a.thermo.yAxis[0].min=parseFloat(a.current.tempMinValueT.value)-b,a.thermo.yAxis[1].max=parseFloat(a.current.tempMaxValueT.value)+b,a.thermo.yAxis[1].min=parseFloat(a.current.tempMinValueT.value)-b,a.thermo.yAxis[1].tickPositions=[parseFloat(a.current.tempMaxValueT.value)],a.thermo.yAxis[2].max=parseFloat(a.current.tempMaxValueT.value)+b,a.thermo.yAxis[2].min=parseFloat(a.current.tempMinValueT.value)-b,a.thermo.yAxis[2].tickPositions=[parseFloat(a.current.tempMinValueT.value)]}function r(){a.liveTemp.series[0].data=a.liveTemp.series[0].data.concat([[(new Date).getTime(),parseFloat(J.outTemp.value)]])}function s(){a.windVane.series[0].data=[parseFloat(a.current.windDir)]}function t(){a.liveWind.series[0].data=a.liveWind.series[0].data.concat([[(new Date).getTime(),parseFloat(J.windSpeed.value)]])}function u(){var b=J.rainRate.value;a.liveRain.series[0].data=a.liveRain.series[0].data.concat([[(new Date).getTime(),parseFloat(b[0])]])}function v(){p(),q(),r(),s(),t(),u()}function w(b){b>=N&&a.stationOnline&&(a.hideRestart=!1)}function x(){"Metric"===a.selectedUnit?angular.forEach(J,function(b,c){a.current[c]=b}):"Imperial"===a.selectedUnit&&angular.forEach(S,function(b){a.current[b]=K.convert(J[b])})}function y(){"Metric"===a.selectedUnit?angular.forEach(F,function(b,c){a.extremes[c]=b}):"Imperial"===a.selectedUnit&&angular.forEach(F,function(b,c){angular.forEach(b,function(b,d){var e=K.convert({value:b.value,unit:b.unit});a.extremes[c][d].value=e.value,a.extremes[c][d].unit=e.unit})})}function z(){c.cancel(I)}function A(){d.cancel(H)}function B(){A(),a.secondsAgo=0,H=d(a.ajaxTimer,1e3)}function C(){b.get("data/now.json?"+(new Date).getTime()).success(function(a){angular.forEach(a,function(a,b){if("units"!==b)if("time"===b){var c=new Date(1e3*a);J[b]=c}else"windDir"===b?J[b]=a:J[b].value=a}),x(),n(),B(),v()})}function D(a){C(),I=c(C,a)}function E(){a.stationOnline?(b.get("data/realtime.json?"+(new Date).getTime()).success(function(b){J=b,a.numUpdates+=1,w(a.numUpdates),C()}),b.get("data/extremes.json?"+(new Date).getTime()).success(function(a){F=a,y()})):(c.cancel(G),z())}a.page.setTitle("Home"),a.page.setDescription("Live Weather data at Darfield, New Zealand. Including: Temperature, Wind, Rainfall, Pressure, Humidity.");var F,G,H,I,J={},K=e,L=3e4,M=600,N=Math.floor(1e3*M/L),O=18e6,P=60,Q=2500,R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=["outTemp","tempchangehour","tempMaxValueT","tempMinValueT","windchill","dewpoint","windSpeed","windGust","avwindlastimediate10","avwindlastimediate60","windMaxValue","rainRate","rainSumDay","rainSumMonth","rainSum","barometer","barometerTrendData"];a.unitTypes=["Metric","Imperial"],a.selectedUnit="Metric",a.current={},a.extremes={},a.hideRestart=!0,a.numUpdates=0,a.stationOnline=!0,a.windVane=f,a.thermo=g,a.liveTemp=h,a.liveWind=i,a.liveRain=j,a.temp24Hr=k.temp24Hr,a.rainBaro24Hr=k.rainBaro24Hr,a.wind24Hr=k.wind24Hr,a.secondsAgo=0,a.getDateString=function(a){var b=new Date(a),c=m(b.getDate())+"-"+R[b.getMonth()]+"-"+b.getFullYear()+" "+m(b.getHours())+":"+m(b.getMinutes())+":"+m(b.getSeconds());return c},a.get24HrGraphData=function(){b.get("data/graphs24Hr.json?"+(new Date).getTime()).then(function(b){a.graphs24Hrs=b.data,o()})},a.restartUpdates=function(){a.startUpdate(L,N),a.hideRestart=!0},a.convertUnits=function(b){a.selectedUnit=b,x(),y(),q()},a.ajaxTimer=function(){a.secondsAgo<P?(a.secondsAgo+=1,H=d(a.ajaxTimer,1e3)):(A(),z())},a.startUpdate=function(b,d){a.numUpdates=0,E(),D(Q),G=c(E,b,d)},a.$on("$destroy",function(){c.cancel(G),z(),A()}),E(),a.get24HrGraphData(),a.startUpdate(L,N-1)}])}(),function(){angular.module("wxApp").controller("homeController",["$scope","$http","$interval","$timeout","unitConversionService","windVaneFactory","thermoFactory","liveTempGraphFactory","liveWindGraphFactory","liveRainGraphFactory","graphs24HrFactory","realtimeService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return 10>a&&(a="0"+a),a}function n(){var b=Date.now()-a.current.time;b>O&&(a.stationOnline=!1)}function o(){var b=864e5,c=432e5;a.temp24Hr.series[0].pointStart=Date.parse(a.graphs24Hrs.timedate)-b+c,a.rainBaro24Hr.series[0].pointStart=Date.parse(a.graphs24Hrs.timedate)-b+c,a.rainBaro24Hr.series[1].pointStart=Date.parse(a.graphs24Hrs.timedate)-b+c,a.temp24Hr.series[0].data=a.graphs24Hrs.temp,a.rainBaro24Hr.series[0].data=a.graphs24Hrs.rain,a.rainBaro24Hr.series[1].data=a.graphs24Hrs.baro}function p(){a.current.tempTrend=l.getTrendIcon(a.current.tempchangehour.value),a.current.baroTrend=l.getTrendIcon(a.current.barometerTrendData.value)}function q(){var b=5,c=4.1;a.thermo.series[1].data=[parseFloat(a.current.outTemp.value)],a.thermo.series[0].data=[parseFloat(a.current.tempMaxValueT.value)+c],a.thermo.yAxis[0].max=parseFloat(a.current.tempMaxValueT.value)+b,a.thermo.yAxis[0].min=parseFloat(a.current.tempMinValueT.value)-b,a.thermo.yAxis[1].max=parseFloat(a.current.tempMaxValueT.value)+b,a.thermo.yAxis[1].min=parseFloat(a.current.tempMinValueT.value)-b,a.thermo.yAxis[1].tickPositions=[parseFloat(a.current.tempMaxValueT.value)],a.thermo.yAxis[2].max=parseFloat(a.current.tempMaxValueT.value)+b,a.thermo.yAxis[2].min=parseFloat(a.current.tempMinValueT.value)-b,a.thermo.yAxis[2].tickPositions=[parseFloat(a.current.tempMinValueT.value)]}function r(){a.liveTemp.series[0].data=a.liveTemp.series[0].data.concat([[(new Date).getTime(),parseFloat(J.outTemp.value)]])}function s(){a.windVane.series[0].data=[parseFloat(a.current.windDir)]}function t(){a.liveWind.series[0].data=a.liveWind.series[0].data.concat([[(new Date).getTime(),parseFloat(J.windSpeed.value)]])}function u(){var b=J.rainRate.value;a.liveRain.series[0].data=a.liveRain.series[0].data.concat([[(new Date).getTime(),parseFloat(b[0])]])}function v(){p(),q(),r(),s(),t(),u()}function w(b){b>=N&&a.stationOnline&&(a.hideRestart=!1)}function x(){"Metric"===a.selectedUnit?angular.forEach(J,function(b,c){a.current[c]=b}):"Imperial"===a.selectedUnit&&angular.forEach(S,function(b){a.current[b]=K.convert(J[b])})}function y(){"Metric"===a.selectedUnit?angular.forEach(F,function(b,c){a.extremes[c]=b}):"Imperial"===a.selectedUnit&&angular.forEach(F,function(b,c){angular.forEach(b,function(b,d){var e=K.convert({value:b.value,unit:b.unit});a.extremes[c][d].value=e.value,a.extremes[c][d].unit=e.unit})})}function z(){c.cancel(I)}function A(){d.cancel(H)}function B(){A(),a.secondsAgo=0,H=d(a.ajaxTimer,1e3)}function C(){b.get("data/now.json?"+(new Date).getTime()).success(function(a){angular.forEach(a,function(a,b){if("units"!==b)if("time"===b){var c=new Date(1e3*a);J[b]=c}else"windDir"===b?J[b]=a:J[b].value=a}),x(),n(),B(),v()})}function D(a){C(),I=c(C,a)}function E(){a.stationOnline?(b.get("data/realtime.json?"+(new Date).getTime()).success(function(b){J=b,a.numUpdates+=1,w(a.numUpdates),C()}),b.get("data/extremes.json?"+(new Date).getTime()).success(function(a){F=a,y()})):(c.cancel(G),z())}a.page.setTitle("Home"),a.page.setDescription("Live Weather data at Darfield, New Zealand. Including: Temperature, Wind, Rainfall, Pressure, Humidity.");var F,G,H,I,J={},K=e,L=3e4,M=600,N=Math.floor(1e3*M/L),O=18e6,P=60,Q=2500,R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=["outTemp","tempchangehour","tempMaxValueT","tempMinValueT","windchill","dewpoint","windSpeed","windGust","avwindlastimediate10","avwindlastimediate60","windMaxValue","rainRate","rainSumDay","rainSumMonth","rainSum","barometer","barometerTrendData"];a.unitTypes=["Metric","Imperial"],a.selectedUnit="Metric",a.current={},a.extremes={},a.hideRestart=!0,a.numUpdates=0,a.stationOnline=!0,a.windVane=f,a.thermo=g,a.liveTemp=h,a.liveWind=i,a.liveRain=j,a.temp24Hr=k.temp24Hr,a.rainBaro24Hr=k.rainBaro24Hr,a.wind24Hr=k.wind24Hr,a.secondsAgo=0,a.getDateString=function(a){var b=new Date(a),c=m(b.getDate())+"-"+R[b.getMonth()]+"-"+b.getFullYear()+" "+m(b.getHours())+":"+m(b.getMinutes())+":"+m(b.getSeconds());return c},a.get24HrGraphData=function(){b.get("data/graphs24Hr.json?"+(new Date).getTime()).then(function(b){a.graphs24Hrs=b.data,o()})},a.restartUpdates=function(){a.startUpdate(L,N),a.hideRestart=!0},a.convertUnits=function(b){a.selectedUnit=b,x(),y(),q()},a.ajaxTimer=function(){a.secondsAgo<P?(a.secondsAgo+=1,H=d(a.ajaxTimer,1e3)):(A(),z())},a.startUpdate=function(b,d){a.numUpdates=0,E(),D(Q),G=c(E,b,d)},a.$on("$destroy",function(){c.cancel(G),z(),A()}),E(),a.get24HrGraphData(),a.startUpdate(L,N-1)}])}(),angular.module("wxApp").service("realtimeService",function(){"use strict";this.getTrendIcon=function(a){var b,c=parseFloat(a);return b=0>c?"down":c>0?"up":"minus"}}),angular.module("wxApp").service("realtimeService",function(){this.getTrendIcon=function(a){var b,c=parseFloat(a);return b=0>c?"down":c>0?"up":"minus"}}),angular.module("wxApp").controller("webcamController",["$scope","$http",function(a,b){"use strict";function c(a){var b=new Date(a),c=b.getDate(),d=b.getMonth()+1,e=b.getFullYear(),f=b.getHours(),g=b.getMinutes();return 1===f.toString().length&&(f="0"+f),1===g.toString().length&&(g="0"+g),c+"/"+d+"/"+e+" "+f+":"+g}function d(){b.get("components/webcam/webcamFiles.php?"+(new Date).getTime()).success(function(b){var d,h=b;for(d=0;d<a.maxImages+1;d+=1)a.webcamImages.push({name:e+d,date:c(1e3*h[0].time-f*d-g)})})}a.page.setTitle("Webcam"),a.page.setDescription("Weather Webcam looking south of Darfield, New Zealand.");var e="webcamimage",f=3e5,g=48e4;a.webcamImagesPath="data/webcam_img",a.currentSelection=e+"0",a.webcamExt=".jpg",a.cacheReset=Date.now(),a.maxImages=1e3,a.imagesPerPage=12,a.webcamImages=[],a.selectImage=function(b){a.currentSelection=b},d()}]),angular.module("wxApp").controller("webcamController",["$scope","$http",function(a,b){function c(a){var b=new Date(a),c=b.getDate(),d=b.getMonth()+1,e=b.getFullYear(),f=b.getHours(),g=b.getMinutes();return 1===f.toString().length&&(f="0"+f),1===g.toString().length&&(g="0"+g),c+"/"+d+"/"+e+" "+f+":"+g}function d(){b.get("components/webcam/webcamFiles.php?"+(new Date).getTime()).success(function(b){var d,h=b;for(d=0;d<a.maxImages+1;d+=1)a.webcamImages.push({name:e+d,date:c(1e3*h[0].time-f*d-g)})})}a.page.setTitle("Webcam"),a.page.setDescription("Weather Webcam looking south of Darfield, New Zealand.");var e="webcamimage",f=3e5,g=48e4;a.webcamImagesPath="data/webcam_img",a.currentSelection=e+"0",a.webcamExt=".jpg",a.cacheReset=Date.now(),a.maxImages=1e3,a.imagesPerPage=12,a.webcamImages=[],a.selectImage=function(b){a.currentSelection=b},d()}]),function(){"use strict";angular.module("wxApp").directive("ads",function(){return{restrict:"A",templateUrl:"shared/googleAds.html",controller:function(){(adsbygoogle=window.adsbygoogle||[]).push({})}}})}(),function(){angular.module("wxApp").directive("ads",function(){return{restrict:"A",templateUrl:"shared/googleAds.html",controller:function(){(adsbygoogle=window.adsbygoogle||[]).push({})}}})}(),angular.module("wxApp").directive("bsActiveLink",["$location",function(a){return{restrict:"A",replace:!1,link:function(b,c){b.$on("$routeChangeSuccess",function(){var b=["/#"+a.path(),"#"+a.path(),a.path()];angular.forEach(c.find("a"),function(a){a=angular.element(a),-1!==b.indexOf(a.attr("href"))?a.parent().addClass("active"):a.parent().removeClass("active")})})}}}]),angular.module("wxApp").directive("bsActiveLink",["$location",function(a){return{restrict:"A",replace:!1,link:function(b,c){b.$on("$routeChangeSuccess",function(){var b=["/#"+a.path(),"#"+a.path(),a.path()];angular.forEach(c.find("a"),function(a){a=angular.element(a),-1!==b.indexOf(a.attr("href"))?a.parent().addClass("active"):a.parent().removeClass("active")})})}}}]),angular.module("wxApp").directive("highlighter",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(d.highlighter,function(b,d){b!==d&&(console.log(),c.addClass("highlight"),a(function(){c.removeClass("highlight")},2e3))})}}}),angular.module("wxApp").directive("highlighter",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(d.highlighter,function(b,d){b!==d&&(console.log(),c.addClass("highlight"),a(function(){c.removeClass("highlight")},2e3))})}}}),angular.module("wxApp").factory("page",function(){var a="default",b="Darfield Personal Weather Station";return{title:function(){return a},setTitle:function(b){a=b},description:function(){return b},setDescription:function(a){b=a}}}),angular.module("wxApp").factory("page",function(){var a="default",b="Darfield Personal Weather Station";return{title:function(){return a},setTitle:function(b){a=b},description:function(){return b},setDescription:function(a){b=a}}}),angular.module("wxApp").factory("unitConversionService",function(){"use strict";var a={units:{" km":[" mi",function(a){return Math.round(.621371*a)}]," km/h":[" mph",function(a){return Math.round(a/1.60934)}]," mi":[" km",function(a){return Math.round(1.60934*a)}]," mph":[" km/h",function(a){return Math.round(1.60934*a)}]," mm":[" in",function(a){return(Math.round(.0393701*a*10)/10).toFixed(1)}]," mm/hr":[" in/hr",function(a){return(Math.round(.0393701*a*10)/10).toFixed(1)}]," in":[" mm",function(a){return Math.round(.0393701*a*10)/10}]," in/hr":[" mm/hr",function(a){return Math.round(.0393701*a*10)/10}]," hPa":[" inHg",function(a){return Math.round(.02952998751*a*100)/100}]," hPa/hr":[" inHg/hr",function(a){return Math.floor(.02952998751*a*100)/100}]," inHg":[" hPa",function(a){return Math.round(3386.39*a*1e3)/1e3}],"&degF":["&degC",function(a){return(Math.round((a-32)*(5/9)*10)/10).toFixed(1)}],"&degC":["&degF",function(a){return(Math.round(10*(1.8*a+32))/10).toFixed(1)}],"&degF/hr":["&degC/hr",function(a){return(Math.round(a*(5/9)*100)/100).toFixed(1)}],"&degC/hr":["&degF/hr",function(a){return(Math.round(1.8*a*10)/10).toFixed(1)}]},convert:function(a){if(this.units[a.unit]){var b=this.units[a.unit][1](parseFloat(a.value));return{value:b,unit:this.units[a.unit][0]}}return a}};return a}),angular.module("wxApp").factory("unitConversionService",function(){var a={units:{" km":[" mi",function(a){return Math.round(.621371*a)}]," km/h":[" mph",function(a){return Math.round(a/1.60934)}]," mi":[" km",function(a){return Math.round(1.60934*a)}]," mph":[" km/h",function(a){return Math.round(1.60934*a)}]," mm":[" in",function(a){return(Math.round(.0393701*a*10)/10).toFixed(1)}]," mm/hr":[" in/hr",function(a){return(Math.round(.0393701*a*10)/10).toFixed(1)}]," in":[" mm",function(a){return Math.round(.0393701*a*10)/10}]," in/hr":[" mm/hr",function(a){return Math.round(.0393701*a*10)/10}]," hPa":[" inHg",function(a){return Math.round(.02952998751*a*100)/100}]," hPa/hr":[" inHg/hr",function(a){return Math.floor(.02952998751*a*100)/100}]," inHg":[" hPa",function(a){return Math.round(3386.39*a*1e3)/1e3}],"&degF":["&degC",function(a){return(Math.round((a-32)*(5/9)*10)/10).toFixed(1)}],"&degC":["&degF",function(a){return(Math.round(10*(1.8*a+32))/10).toFixed(1)}],"&degF/hr":["&degC/hr",function(a){return(Math.round(a*(5/9)*100)/100).toFixed(1)}],"&degC/hr":["&degF/hr",function(a){return(Math.round(1.8*a*10)/10).toFixed(1)}]},convert:function(a){if(this.units[a.unit]){var b=this.units[a.unit][1](parseFloat(a.value));return{value:b,unit:this.units[a.unit][0]}}return a}};return a});
//# sourceMappingURL=sourceMap.map